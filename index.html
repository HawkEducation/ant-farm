<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Plants: Ant Empire (Overlord Edition)</title>
    <style>
        body { background: #1a1a1a; color: #e0e0e0; font-family: 'Courier New', monospace; text-align: center; margin: 0; padding: 10px; }
        #game-container { max-width: 500px; margin: 0 auto; background: #262626; padding: 20px; border-radius: 15px; border: 3px solid #00ffff; position: relative; box-shadow: 0 0 20px rgba(0,255,255,0.4); }
        
        .hp-bg { width: 100%; height: 12px; background: #441111; border-radius: 6px; margin: 5px 0; border: 1px solid #333; overflow: hidden; }
        .hp-fill { height: 100%; background: #00ff00; transition: width 0.3s; }
        #enemy-bar { background: #ff4444; }

        .stat-box { display: flex; flex-wrap: wrap; justify-content: space-around; background: #000; padding: 10px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #333; }
        .stat { color: #00ffff; font-weight: bold; }
        
        button { background: #00ffff; color: #111; border: none; padding: 12px; font-weight: bold; border-radius: 8px; cursor: pointer; margin: 5px; width: 95%; font-size: 0.9rem; transition: 0.2s; }
        button:hover { background: #00cccc; }
        button:disabled { background: #444; color: #888; cursor: not-allowed; }
        
        .battle-zone { background: #4a0000; padding: 15px; border-radius: 10px; display: none; border: 2px solid #ff0000; margin: 10px 0; }
        #combat-log { font-size: 0.75em; color: #ffcccc; height: 80px; overflow-y: hidden; background: #000; padding: 5px; border-radius: 5px; text-align: left; border: 1px solid #444; }

        #dev-panel { margin-top: 20px; padding: 10px; border-top: 1px solid #444; font-size: 0.8rem; }
        #dev-input { background: #000; color: #0f0; border: 1px solid #00ffff; padding: 5px; width: 120px; border-radius: 4px; }

        #victory-screen { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 100; border-radius: 15px; flex-direction: column; justify-content: center; align-items: center; color: #00ffff; }
    </style>
</head>
<body onload="updateUI()">

<div id="game-container">
    <div id="victory-screen">
        <h1 style="color: gold;">üèÜ EMPIRE ASCENDED üèÜ</h1>
        <p>Day 1000 Reached</p>
        <div id="final-stats" style="text-align: left; margin: 20px 0;"></div>
        <button onclick="location.reload()" style="width: auto;">Reign Again</button>
    </div>

    <div class="hp-bg"><div id="queen-bar" class="hp-fill" style="width: 100%;"></div></div>
    <small>QUEEN HEALTH: <span id="q-hp-text">100</span>/100</small>

    <h1>Day: <span id="day-display">1</span></h1>
    
    <div class="stat-box">
        <div>Workers: <span id="ant-count" class="stat">1</span></div>
        <div>Soldiers: <span id="soldier-count" class="stat">0</span></div>
        <div>Bread: <span id="bread-count" class="stat">0</span></div>
    </div>

    <div class="stat-box" style="border-color: #444;">
        <div>Seeds: <span id="seed-count" class="stat">0</span></div>
        <div>Honey: <span id="honey-count" class="stat">0</span></div>
    </div>

    <div id="battle-ui" class="battle-zone">
        <strong style="color: #ff4444;">‚ö†Ô∏è INVASION DETECTED</strong>
        <div class="hp-bg"><div id="enemy-bar" class="hp-fill" style="width: 100%;"></div></div>
        <button onclick="manualAttack()" style="background: #ff0000; color: white;">CRUSH INVADERS</button>
        <div id="combat-log"></div>
    </div>

    <div id="controls">
        <button id="forage-btn" onclick="forage()">Forage üåæ</button>
        <button id="bakery-btn" onclick="startBakery()">Bakery (5 Seeds ‚Üí 5 Bread) ü•ñ</button>
        <button id="honey-btn" onclick="useHoney()">Use Honey üçØ</button>
        <button id="soldier-btn" onclick="trainSoldier()">Train Soldier (15 Bread) üõ°Ô∏è</button>
        <button id="dirt-btn" onclick="buyDirt()">Dirt Cover | Cost: <span id="dirt-cost">10</span> üï≥Ô∏è</button>
        <button id="upgrade-btn" onclick="upgradeColony()">Mandible Upgrade (<span id="up-cost">10</span> Bread) üí™</button>
    </div>

    <div id="dev-panel">
        DEV CMD: <input type="password" id="dev-input" placeholder="code"> 
        <button onclick="checkDevCode()" style="width: auto; padding: 5px 10px; font-size: 0.7rem;">Execute</button>
    </div>
</div>

<script>
    let ants = 1, soldiers = 0, seeds = 0, bread = 0, honey = 0, day = 1;
    let queenHP = 100, pickupAmount = 1, upgradeCost = 10, dirtDefense = 0, dirtCost = 10;
    let enemyHP = 0, maxEnemyHP = 0, inBattle = false, isIndustrial = false, isGameOver = false;
    let autoClickInterval = null, autoSoldierInterval = null;
    let soldierHPList = [];

    function log(msg) {
        const l = document.getElementById('combat-log');
        l.innerHTML = "> " + msg + "<br>" + l.innerHTML;
        if (l.innerHTML.length > 500) l.innerHTML = l.innerHTML.substring(0, 500); 
    }

    function updateUI() {
        if (isGameOver) return;
        document.getElementById('ant-count').innerText = ants.toLocaleString();
        document.getElementById('soldier-count').innerText = soldiers.toLocaleString();
        document.getElementById('bread-count').innerText = bread.toLocaleString();
        document.getElementById('seed-count').innerText = seeds.toLocaleString();
        document.getElementById('honey-count').innerText = honey.toLocaleString();
        document.getElementById('day-display').innerText = day;
        document.getElementById('dirt-cost').innerText = dirtCost.toLocaleString();
        document.getElementById('up-cost').innerText = upgradeCost.toLocaleString();
        document.getElementById('queen-bar').style.width = queenHP + "%";
        document.getElementById('q-hp-text').innerText = Math.max(0, Math.floor(queenHP));

        if (inBattle) {
            document.getElementById('battle-ui').style.display = 'block';
            document.getElementById('enemy-bar').style.width = (enemyHP / maxEnemyHP * 100) + "%";
        } else {
            document.getElementById('battle-ui').style.display = 'none';
        }

        document.getElementById('honey-btn').disabled = (honey < 1 || queenHP >= 100);
        document.getElementById('soldier-btn').disabled = (bread < 15);
        document.getElementById('dirt-btn').disabled = (bread < dirtCost);
        document.getElementById('upgrade-btn').disabled = (bread < upgradeCost);

        if (day >= 1000) triggerVictory();
    }

    function triggerVictory() {
        isGameOver = true;
        clearInterval(autoClickInterval);
        clearInterval(autoSoldierInterval);
        document.getElementById('victory-screen').style.display = 'flex';
        document.getElementById('final-stats').innerHTML = `
            Workers: ${ants}<br>Soldiers: ${soldiers}<br>Final Defense: ${dirtDefense}
        `;
    }

    function forage() {
        if (!inBattle && !isGameOver) {
            seeds += pickupAmount;
            if (Math.random() > 0.92) { honey++; log("Honey found!"); }
            updateUI();
        }
    }

    function startBakery() {
        if (seeds >= 5 && !isGameOver) {
            if (isIndustrial) {
                seeds -= 5; bread += 5; ants += 2;
                updateUI();
            } else {
                const btn = document.getElementById('bakery-btn');
                if (btn.innerText.includes("...")) return;
                seeds -= 5; btn.innerText = "Baking... ‚è≥";
                setTimeout(() => {
                    bread += 5; ants += 2;
                    btn.innerText = "Bakery (5 Seeds ‚Üí 5 Bread) ü•ñ";
                    updateUI();
                }, 2500);
            }
        }
    }

    function trainSoldier() { 
        if (bread >= 15) { 
            bread -= 15; soldiers++; soldierHPList.push(20); 
            updateUI(); 
        } 
    }

    function useHoney() {
        if (honey > 0) { honey--; queenHP = Math.min(100, queenHP + 20); updateUI(); }
    }

    function buyDirt() {
        if (bread >= dirtCost) { bread -= dirtCost; dirtDefense++; dirtCost = Math.floor(dirtCost * 1.8); updateUI(); }
    }

    function manualAttack() {
        if (inBattle) { 
            enemyHP -= (2 + (pickupAmount * 0.5)); 
            if (enemyHP <= 0) { inBattle = false; log("Invasion crushed!"); }
            updateUI(); 
        }
    }

    function checkDevCode() {
        const input = document.getElementById('dev-input');
        const val = input.value.toLowerCase();
        
        if (val === 'drplants') {
            seeds += 500; bread += 500; updateUI();
        } else if (val === 'industrialist') {
            isIndustrial = true; log("INDUSTRY PEAKED");
        } else if (val === 'autoclick') {
            if (!autoClickInterval) {
                autoClickInterval = setInterval(() => { forage(); startBakery(); }, 150);
                log("AUTO-CLICK: ACTIVE");
            } else {
                clearInterval(autoClickInterval); autoClickInterval = null;
                log("AUTO-CLICK: OFF");
            }
        } else if (val === 'autosoldier') {
            if (!autoSoldierInterval) {
                autoSoldierInterval = setInterval(() => { if (bread >= 15) trainSoldier(); }, 300);
                log("AUTO-RECRUIT: ACTIVE");
            } else {
                clearInterval(autoSoldierInterval); autoSoldierInterval = null;
                log("AUTO-RECRUIT: OFF");
            }
        }
        input.value = "";
    }

    // Combat Loop
    setInterval(() => {
        if (inBattle && !isGameOver) {
            if (soldiers > 0) {
                enemyHP -= (soldiers * 2);
                soldierHPList[0] -= Math.max(1, 5 - dirtDefense);
                if (soldierHPList[0] <= 0) { soldierHPList.shift(); soldiers--; log("Soldier fell!"); }
            } else {
                queenHP -= Math.max(1, 6 - dirtDefense);
            }
            if (enemyHP <= 0) inBattle = false;
            if (queenHP <= 0) { isGameOver = true; alert("The Queen has fallen."); location.reload(); }
            updateUI();
        }
    }, 1000);

    // Day Cycle
    setInterval(() => {
        if (!inBattle && !isGameOver) {
            day++;
            if (day > 5 && Math.random() > 0.88) {
                inBattle = true; maxEnemyHP = 30 + (day * 6); enemyHP = maxEnemyHP;
                log("Enemies at the gates!");
            }
            updateUI();
        }
    }, 4000);

    function upgradeColony() { 
        if (bread >= upgradeCost) { 
            bread -= upgradeCost; pickupAmount += 2; 
            upgradeCost = Math.floor(upgradeCost * 2.2); updateUI(); 
        } 
    }
</script>
</body>
</html>
