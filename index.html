<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ant Empire: Singularity Edition</title>
    <style>
        body { background: #0a0a0a; color: #00ffcc; font-family: 'Courier New', monospace; text-align: center; margin: 0; padding: 10px; }
        #game-container { max-width: 600px; margin: 0 auto; background: #111; padding: 20px; border-radius: 20px; border: 4px solid #00ffcc; box-shadow: 0 0 30px rgba(0,255,204,0.3); }
        .hp-bg { width: 100%; height: 15px; background: #300; border-radius: 8px; margin: 5px 0; border: 1px solid #00ffcc; overflow: hidden; }
        .hp-fill { height: 100%; background: #00ff00; transition: width 0.3s; }
        .stat-box { display: flex; flex-wrap: wrap; justify-content: space-around; background: #000; padding: 10px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #333; }
        .stat { color: #fff; font-weight: bold; text-shadow: 0 0 5px #00ffcc; }
        button { background: #00ffcc; color: #000; border: none; padding: 12px; font-weight: bold; border-radius: 8px; cursor: pointer; margin: 5px; width: 95%; transition: 0.2s; font-size: 1em; }
        button:hover { background: #fff; box-shadow: 0 0 15px #00ffcc; }
        .battle-zone { background: #200; padding: 15px; border-radius: 10px; display: none; border: 2px solid #ff0000; margin: 10px 0; }
        #combat-log { font-size: 0.8em; color: #0f0; height: 120px; overflow-y: hidden; background: #000; padding: 10px; border-radius: 5px; text-align: left; border: 1px solid #00ffcc; margin-top: 10px; }
        #dev-input { background: #000; color: #0f0; border: 1px solid #00ffcc; padding: 8px; width: 150px; border-radius: 4px; outline: none; }
    </style>
</head>
<body onload="updateUI()">

<div id="game-container">
    <div class="hp-bg"><div id="queen-bar" class="hp-fill" style="width: 100%;"></div></div>
    <small>QUEEN STRENGTH: <span id="q-hp-text">100</span>/100</small>

    <h1>Day: <span id="day-display">1</span></h1>
    
    <div class="stat-box">
        <div>Workers: <span id="ant-count" class="stat">1</span></div>
        <div>Soldiers: <span id="soldier-count" class="stat">0</span></div>
        <div>Bread: <span id="bread-count" class="stat">0</span></div>
    </div>

    <div class="stat-box" style="border-color: #444;">
        <div>Seeds: <span id="seed-count" class="stat">0</span></div>
        <div>Honey: <span id="honey-count" class="stat">0</span></div>
    </div>

    <div id="battle-ui" class="battle-zone">
        <strong id="invasion-text" style="color: #ff4444;">‚ö†Ô∏è INVASION</strong>
        <div class="hp-bg"><div id="enemy-bar" class="hp-fill" style="width: 100%;"></div></div>
        <button onclick="manualAttack()" style="background: #ff0000; color: white;">VAPORIZE</button>
    </div>

    <div id="controls">
        <button onclick="forage()">Forage üåæ</button>
        <button onclick="startBakery()">Bakery (5 Seeds ‚Üí 5 Bread) ü•ñ</button>
        <button onclick="trainSoldier()">Train Soldier (15 Bread) üõ°Ô∏è</button>
        <button onclick="buyDirt()">Dirt Cover | Cost: <span id="dirt-cost">10</span> üï≥Ô∏è</button>
        <button onclick="upgradeColony()">Mandible Upgrade (<span id="up-cost">10</span> Bread) üí™</button>
    </div>

    <div id="combat-log"></div>

    <div style="margin-top:20px; border-top: 1px solid #333; padding-top: 15px;">
        DEV CMD: <input type="text" id="dev-input" placeholder="Enter Command"> 
        <button onclick="checkDevCode()" style="width: auto; padding: 8px 15px;">Execute</button>
    </div>
</div>

<script>
    let ants = 1, soldiers = 0, seeds = 0, bread = 0, honey = 0, day = 1;
    let queenHP = 100, pickupAmount = 1, upgradeCost = 10, dirtDefense = 0, dirtCost = 10;
    let enemyHP = 0, maxEnemyHP = 0, inBattle = false;
    let autoBuyInterval = null;
    let soldierHPList = [];
    const MAX_SAFE = 9007199254740991;

    function log(msg) {
        const l = document.getElementById('combat-log');
        l.innerHTML = "> " + msg + "<br>" + l.innerHTML;
        if (l.innerHTML.length > 1000) l.innerHTML = l.innerHTML.substring(0, 1000);
    }

    function updateUI() {
        document.getElementById('ant-count').innerText = ants.toLocaleString();
        document.getElementById('soldier-count').innerText = soldiers.toLocaleString();
        document.getElementById('bread-count').innerText = bread.toLocaleString();
        document.getElementById('seed-count').innerText = seeds.toLocaleString();
        document.getElementById('honey-count').innerText = honey.toLocaleString();
        document.getElementById('day-display').innerText = day;
        document.getElementById('dirt-cost').innerText = (dirtCost === 0) ? "FREE" : dirtCost.toLocaleString();
        document.getElementById('up-cost').innerText = (upgradeCost === 0) ? "FREE" : upgradeCost.toLocaleString();
        document.getElementById('queen-bar').style.width = Math.max(0, queenHP) + "%";
        document.getElementById('q-hp-text').innerText = Math.floor(queenHP);
        document.getElementById('battle-ui').style.display = inBattle ? 'block' : 'none';
        if(inBattle) {
            document.getElementById('enemy-bar').style.width = (enemyHP / maxEnemyHP * 100) + "%";
            if (soldiers > 1000000) document.getElementById('invasion-text').innerText = "üç≠ FREE SNACKS";
        }
    }

    function forage() { seeds += pickupAmount; if (Math.random() > 0.9) honey++; updateUI(); }
    function startBakery() { if (seeds >= 5) { seeds -= 5; bread += 5; ants += 2; updateUI(); } }
    function trainSoldier() { if (bread >= 15) { bread -= 15; soldiers++; soldierHPList.push(20); updateUI(); } }
    
    function buyDirt() { 
        if (bread >= dirtCost) { 
            bread -= dirtCost; 
            dirtDefense++; 
            if(dirtCost > 0) dirtCost = Math.floor(dirtCost * 1.8); 
            updateUI(); 
        } 
    }

    function upgradeColony() { 
        if (bread >= upgradeCost) { 
            bread -= upgradeCost; 
            pickupAmount += 5; 
            if(upgradeCost > 0) upgradeCost = Math.floor(upgradeCost * 2.2); 
            updateUI(); 
        } 
    }

    function manualAttack() { if (inBattle) { enemyHP -= (pickupAmount * 10); if (enemyHP <= 0) inBattle = false; updateUI(); } }

    function checkDevCode() {
        const val = document.getElementById('dev-input').value.toLowerCase();
        
        if (val === 'singularity') {
            ants = MAX_SAFE; soldiers = MAX_SAFE; seeds = MAX_SAFE; bread = MAX_SAFE; honey = MAX_SAFE;
            pickupAmount = 1000000; dirtDefense = 1000000;
            log("üåå REALITY COLLAPSED: MAX STATS ACHIEVED");
        } 
        else if (val === 'free') {
            upgradeCost = 0; dirtCost = 0;
            log("üí∏ ECONOMY DELETED: UPGRADES ARE NOW FREE");
        }
        else if (val === 'autobuy') {
            if (!autoBuyInterval) {
                autoBuyInterval = setInterval(() => {
                    upgradeColony(); buyDirt(); trainSoldier(); startBakery();
                }, 100);
                log("ü§ñ AUTO-BUYER: OVERDRIVE ONLINE");
            } else {
                clearInterval(autoBuyInterval); autoBuyInterval = null;
                log("ü§ñ AUTO-BUYER: OFFLINE");
            }
        }
        document.getElementById('dev-input').value = "";
        updateUI();
    }

    // Combat & Day Cycle
    setInterval(() => {
        if (inBattle) {
            if (soldiers > 0) { 
                enemyHP -= (soldiers * 5); 
                let damage = Math.max(0, 10 - dirtDefense);
                if (soldierHPList.length > 0) {
                    soldierHPList[0] -= damage; 
                    if (soldierHPList[0] <= 0) { soldierHPList.shift(); soldiers--; }
                }
            } else { queenHP -= Math.max(0, 10 - dirtDefense); }
            if (enemyHP <= 0) inBattle = false;
            updateUI();
        }
    }, 1000);

    setInterval(() => { 
        if (!inBattle) { 
            day++; 
            if (day > 5 && Math.random() > 0.8) { 
                inBattle = true; 
                maxEnemyHP = 50 + (day * 50); 
                enemyHP = maxEnemyHP; 
                log("A snack has arrived at the gates."); 
            } 
            updateUI(); 
        } 
    }, 3000);
</script>
</body>
</html>
